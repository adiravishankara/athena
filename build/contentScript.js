console.log("Content script loaded");chrome.storage.local.get(["researchMode"],function(e){(e.researchMode||!1)&&c()});chrome.storage.onChanged.addListener(function(e,t){t==="local"&&e.researchMode&&(e.researchMode.newValue?c():r())});function c(){if(document.getElementById("athena-floating-button"))return;const e=document.createElement("div");e.id="athena-floating-button",e.innerHTML="+",e.style.position="fixed",e.style.bottom="20px",e.style.right="20px",e.style.background="#004d40",e.style.color="white",e.style.padding="15px 18px",e.style.borderRadius="50%",e.style.fontSize="24px",e.style.fontWeight="bold",e.style.cursor="pointer",e.style.zIndex="10000",e.style.boxShadow="0 2px 5px rgba(0,0,0,0.3)",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.width="40px",e.style.height="40px";let t=!1,o,l;e.addEventListener("mousedown",function(n){t=!0,o=n.clientX-e.getBoundingClientRect().left,l=n.clientY-e.getBoundingClientRect().top}),document.addEventListener("mousemove",function(n){if(t){const i=n.clientX-o,s=n.clientY-l;e.style.right="auto",e.style.bottom="auto",e.style.left=i+"px",e.style.top=s+"px"}}),document.addEventListener("mouseup",function(){t=!1}),e.addEventListener("click",function(n){if(!t){const i=window.location.href,s=document.title;chrome.runtime.sendMessage({action:"ADD_SOURCE",url:i,title:s,type:"web",datetime:new Date().toISOString()});const d=e.style.background;e.style.background="#2e7d32",e.innerHTML="âœ“",setTimeout(()=>{e.style.background=d,e.innerHTML="+"},1e3)}}),document.body.appendChild(e)}function r(){const e=document.getElementById("athena-floating-button");e&&e.remove()}
